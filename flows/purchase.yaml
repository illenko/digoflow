id: purchase
name: Purchase Flow

entrypoint:
    type: http-handler
    config:
      method: POST
      path: /purchase

input:
  headers:
    - name: x-api-key
      type: string
  body: 
    type: json
    fields:
      - name: id
        type: string
      - name: description
        type: string
      - name: resultUrl
        type: string
      - name: amount.value
        type: float
      - name: amount.currency
        type: string
      - name: card
        type: string
      - name: payer.id
        type: string
      - name: payer.name.firstName
        type: string
      - name: payer.name.lastName
        type: string


tasks:
  - id: use-default-log
    type: log
    input:
      - name: message-to-print
        type: string
        value: "This is a description from input: {{ input.body.description }}"
      - name: message-to-print2
        type: string
        value: This is a hardcoded description
  - id: use-custom-log
    name: custom-log
    type: custom
    input:
      - name: message-to-print
        type: string
        value: This is a description from input {{ input.body.description }}
      - name: message-to-print2
        type: string
        value: This is a hardcoded description